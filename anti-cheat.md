Collecting workspace information# T·ªïng Quan C∆° Ch·∫ø Anti-Cheat H·ªá Th·ªëng Test Online

## üìã M·ª•c L·ª•c
1. Ki·∫øn Tr√∫c T·ªïng Th·ªÉ
2. B·∫£o M·∫≠t D·ªØ Li·ªáu
3. Ph√°t Hi·ªán Vi Ph·∫°m
4. X·ª≠ L√Ω Vi Ph·∫°m
5. L∆∞u Tr·ªØ An To√†n
6. B√°o C√°o & Gi√°m S√°t

---

## üèóÔ∏è Ki·∫øn Tr√∫c T·ªïng Th·ªÉ

### C√°c Th√†nh Ph·∫ßn Ch√≠nh

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    TestRoom Component                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ           Anti-Cheat Detection Layer              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Event Listeners                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Activity Monitoring                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Violation Tracking                             ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ         Secure Storage Layer (secureStorage)      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Encryption/Decryption                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Integrity Checking                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Fingerprinting                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ              State Management                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Violation Counters                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Test Status                                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Activity Logs                                  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîê B·∫£o M·∫≠t D·ªØ Li·ªáu

### 1. **SecureStorage Class** (secureStorage.js)

#### a. T·∫°o Secret Keys ƒêa L·ªõp

```javascript
generateSecretKey() {
  // K·∫øt h·ª£p nhi·ªÅu browser fingerprints
  const canvas = this.getCanvasFingerprint();
  const screenInfo = `${window.screen.width}x${window.screen.height}x${window.screen.colorDepth}`;
  const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
  const language = navigator.language;
  const userAgent = navigator.userAgent.slice(0, 50);
  
  return CryptoJS.SHA256(`${canvas}-${screenInfo}-${timezone}-${language}-${userAgent}`).toString();
}
```

**M·ª•c ƒë√≠ch:**
- T·∫°o key duy nh·∫•t cho m·ªói thi·∫øt b·ªã/tr√¨nh duy·ªát
- Kh√≥ b·ªã ƒëo√°n ho·∫∑c sao ch√©p
- NgƒÉn ch·∫∑n vi·ªác chuy·ªÉn d·ªØ li·ªáu gi·ªØa c√°c thi·∫øt b·ªã

#### b. Canvas Fingerprinting

```javascript
getCanvasFingerprint() {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  canvas.width = 200;
  canvas.height = 50;
  
  ctx.textBaseline = 'top';
  ctx.font = '14px Arial';
  ctx.fillText('SecureTest123!@#', 2, 2);
  
  return CryptoJS.SHA256(canvas.toDataURL()).toString().slice(0, 16);
}
```

**ƒê·∫∑c ƒëi·ªÉm:**
- T·∫°o fingerprint duy nh·∫•t d·ª±a tr√™n kh·∫£ nƒÉng render c·ªßa browser
- Kh√°c nhau gi·ªØa c√°c thi·∫øt b·ªã/tr√¨nh duy·ªát
- Kh√≥ b·ªã gi·∫£ m·∫°o

---

### 2. **M√£ H√≥a D·ªØ Li·ªáu**

#### a. Data Packet Structure

```javascript
createDataPacket(data, testId, timestamp = Date.now()) {
  const packet = {
    data,              // D·ªØ li·ªáu th·ª±c t·∫ø
    testId,            // ID b√†i test
    timestamp,         // Th·ªùi gian t·∫°o
    sessionId,         // ID phi√™n l√†m b√†i
    checksum,          // Checksum ƒë·ªÉ verify
    integrity          // Hash HMAC ƒë·ªÉ ki·ªÉm tra to√†n v·∫πn
  };
  return packet;
}
```

#### b. Quy Tr√¨nh M√£ H√≥a

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Raw Data    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Create Data Packet  ‚îÇ
‚îÇ  ‚Ä¢ Add metadata      ‚îÇ
‚îÇ  ‚Ä¢ Calculate checksum‚îÇ
‚îÇ  ‚Ä¢ Add integrity hash‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AES Encryption  ‚îÇ
‚îÇ  with SecretKey  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Obfuscation     ‚îÇ
‚îÇ  ‚Ä¢ Caesar cipher ‚îÇ
‚îÇ  ‚Ä¢ Base64 encode ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Store in        ‚îÇ
‚îÇ  localStorage    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### c. Obfuscation Layer

```javascript
obfuscateData(data) {
  // Chia nh·ªè d·ªØ li·ªáu th√†nh c√°c ph·∫ßn 50 k√Ω t·ª±
  const parts = data.match(/.{1,50}/g) || [];
  
  // √Åp d·ª•ng Caesar cipher v·ªõi shift kh√°c nhau cho m·ªói ph·∫ßn
  const shuffled = parts.map((part, index) => {
    const shift = (index + 1) % 26;
    return part.split('').map(char => {
      if (char.match(/[a-zA-Z]/)) {
        const code = char.charCodeAt(0);
        const base = code >= 65 && code <= 90 ? 65 : 97;
        return String.fromCharCode(((code - base + shift) % 26) + base);
      }
      return char;
    }).join('');
  });
  
  return btoa(shuffled.join('|'));
}
```

**L·ª£i √≠ch:**
- D·ªØ li·ªáu kh√¥ng th·ªÉ ƒë·ªçc ƒë∆∞·ª£c trong DevTools
- Th√™m 1 l·ªõp b·∫£o v·ªá ngo√†i m√£ h√≥a AES
- Kh√≥ ph√¢n t√≠ch c·∫•u tr√∫c d·ªØ li·ªáu

---

### 3. **Integrity Checking**

#### a. Checksum Verification

```javascript
// Khi t·∫°o packet
checksum: CryptoJS.SHA256(JSON.stringify(data) + testId + timestamp).toString()

// Khi verify
const expectedChecksum = CryptoJS.SHA256(
  JSON.stringify(packet.data) + packet.testId + packet.timestamp
).toString();

if (packet.checksum !== expectedChecksum) {
  throw new Error('Data checksum mismatch');
}
```

#### b. HMAC Integrity Hash

```javascript
verifyIntegrity(packet) {
  const { integrity, ...packetWithoutIntegrity } = packet;
  const expectedIntegrity = CryptoJS.HmacSHA256(
    JSON.stringify(packetWithoutIntegrity), 
    this.integrityKey
  ).toString();
  
  return integrity === expectedIntegrity;
}
```

**Ph√°t hi·ªán:**
- D·ªØ li·ªáu b·ªã thay ƒë·ªïi
- Packet b·ªã gi·∫£ m·∫°o
- Th√¥ng tin b·ªã ch√®n th√™m

---

## üö® Ph√°t Hi·ªán Vi Ph·∫°m

### 1. **C√°c Lo·∫°i Vi Ph·∫°m ƒê∆∞·ª£c Gi√°m S√°t**

```javascript
const suspiciousActivity = {
  tabSwitches: 0,           // Chuy·ªÉn tab/c·ª≠a s·ªï
  devToolsAttempts: 0,      // M·ªü DevTools
  copyAttempts: 0,          // Sao ch√©p n·ªôi dung
  screenshotAttempts: 0,    // Ch·ª•p m√†n h√¨nh
  contextMenuAttempts: 0,   // Click ph·∫£i
  keyboardShortcuts: 0      // Ph√≠m t·∫Øt b·ªã c·∫•m
};
```

---

### 2. **Event Listeners & Detection Methods**

#### a. **DevTools Detection**

```javascript
const detectDevTools = () => {
  const threshold = 160;
  const widthThreshold = window.outerWidth - window.innerWidth > threshold;
  const heightThreshold = window.outerHeight - window.innerHeight > threshold;
  
  if (widthThreshold || heightThreshold) {
    logSuspiciousActivity('devToolsAttempts');
  }
};

// Ki·ªÉm tra m·ªói gi√¢y
const devToolsInterval = setInterval(detectDevTools, 1000);
```

**Nguy√™n l√Ω:**
- Khi DevTools m·ªü, k√≠ch th∆∞·ªõc c·ª≠a s·ªï thay ƒë·ªïi
- So s√°nh `outerWidth/Height` v·ªõi `innerWidth/Height`
- N·∫øu ch√™nh l·ªách > 160px ‚Üí DevTools ƒëang m·ªü

---

#### b. **Tab Switching Detection**

```javascript
// Method 1: visibilitychange event
document.addEventListener('visibilitychange', () => {
  if (document.hidden && !isTestSubmitted) {
    logSuspiciousActivity('tabSwitches');
  }
});

// Method 2: window blur event
window.addEventListener('blur', () => {
  if (!isTestSubmitted) {
    logSuspiciousActivity('tabSwitches');
  }
});

// Method 3: beforeunload (refresh/reload)
window.addEventListener('beforeunload', (e) => {
  if (!isTestSubmitted) {
    logSuspiciousActivity('tabSwitches', 'Page refresh/reload attempt');
    e.preventDefault();
    e.returnValue = '';
  }
});
```

**Bao ph·ªßm:**
- Chuy·ªÉn tab (`Alt+Tab`)
- M·ªü c·ª≠a s·ªï m·ªõi
- Reload trang
- Tho√°t tr√¨nh duy·ªát

---

#### c. **Keyboard Shortcuts Blocking**

```javascript
const handleKeyDown = (e) => {
  // Danh s√°ch ph√≠m t·∫Øt b·ªã c·∫•m
  if (
    e.key === 'F12' ||
    (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
    (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'a' || e.key === 'c' || e.key === 'v' || e.key === 'x')) ||
    (e.metaKey && (e.key === 'u' || e.key === 's' || e.key === 'a' || e.key === 'c' || e.key === 'v' || e.key === 'x'))
  ) {
    e.preventDefault();
    logSuspiciousActivity('keyboardShortcuts', `Attempted: ${e.key}`);
    return false;
  }
};
```

**Ph√≠m t·∫Øt b·ªã ch·∫∑n:**
- `F12` - M·ªü DevTools
- `Ctrl+Shift+I/J/C` - DevTools variants
- `Ctrl+U` - View source
- `Ctrl+S` - L∆∞u trang
- `Ctrl+A/C/V/X` - Select all, Copy, Paste, Cut

---

#### d. **Context Menu & Copy Prevention**

```javascript
// Ch·∫∑n menu chu·ªôt ph·∫£i
document.addEventListener('contextmenu', (e) => {
  e.preventDefault();
  logSuspiciousActivity('contextMenuAttempts');
  return false;
});

// Ch·∫∑n selection
document.addEventListener('selectstart', (e) => {
  e.preventDefault();
  return false;
});

// Ch·∫∑n copy/cut/paste
['copy', 'cut', 'paste'].forEach(event => {
  document.addEventListener(event, (e) => {
    e.preventDefault();
    logSuspiciousActivity('copyAttempts');
    return false;
  });
});
```

---

#### e. **Screenshot Detection**

```javascript
const handleKeyUp = (e) => {
  if (e.key === 'PrintScreen') {
    logSuspiciousActivity('screenshotAttempts');
  }
};
```

**H·∫°n ch·∫ø:**
- Ch·ªâ ph√°t hi·ªán ƒë∆∞·ª£c ph√≠m `PrintScreen`
- Kh√¥ng ph√°t hi·ªán ƒë∆∞·ª£c Snipping Tool, Screenshot tools kh√°c
- V·∫´n h·ªØu √≠ch ƒë·ªÉ ghi log v√† c·∫£nh b√°o

---

#### f. **Fullscreen Enforcement**

```javascript
// T·ª± ƒë·ªông v√†o fullscreen
const enterFullscreen = async () => {
  try {
    if (document.documentElement.requestFullscreen) {
      await document.documentElement.requestFullscreen();
    } else if (document.documentElement.webkitRequestFullscreen) {
      await document.documentElement.webkitRequestFullscreen();
    } else if (document.documentElement.msRequestFullscreen) {
      await document.documentElement.msRequestFullscreen();
    }
    setIsFullscreen(true);
  } catch (err) {
    console.error('Could not enter fullscreen:', err);
  }
};

// Gi√°m s√°t thay ƒë·ªïi fullscreen
const handleFullscreenChange = () => {
  const isCurrentlyFullscreen = !!(
    document.fullscreenElement ||
    document.webkitFullscreenElement ||
    document.msFullscreenElement
  );
  
  setIsFullscreen(isCurrentlyFullscreen);
  
  if (!isCurrentlyFullscreen && testData) {
    logSuspiciousActivity('tabSwitches', 'Exited fullscreen');
  }
};
```

**M·ª•c ƒë√≠ch:**
- NgƒÉn ch·∫∑n xem t√†i li·ªáu ·ªü c·ª≠a s·ªï kh√°c
- T·∫≠p trung h·ªçc sinh v√†o b√†i test
- Ghi log khi tho√°t fullscreen

---

## üìù Activity Logging

### 1. **Log Entry Structure**

```javascript
const logEntry = { 
  type,                    // Lo·∫°i vi ph·∫°m
  details,                 // Chi ti·∫øt
  timestamp,               // Th·ªùi gian
  questionIndex,           // ƒêang ·ªü c√¢u h·ªèi n√†o
  sessionId                // ID phi√™n l√†m b√†i
};

activityLogRef.current.push(logEntry);
```

### 2. **Logging Function**

```javascript
const logSuspiciousActivity = useCallback((type, details = '') => {
  if (isTestSubmitted || securityViolationDetected || blockedForCheating) return;
  
  const timestamp = new Date().toISOString();
  const logEntry = { 
    type, 
    details, 
    timestamp, 
    questionIndex: currentQuestionIndex,
    sessionId: secureStorage.getSessionId()
  };
  
  // Th√™m v√†o log
  activityLogRef.current.push(logEntry);
  
  // L∆∞u v√†o secure storage ngay l·∫≠p t·ª©c
  secureStorage.setSecureItem(`activity_log_${testId}`, activityLogRef.current, testId);
  
  // TƒÉng counter
  setSuspiciousActivity(prev => ({
    ...prev,
    [type]: prev[type] + 1
  }));
  
  // Hi·ªÉn th·ªã c·∫£nh b√°o
  showWarningToUser(type);
  
  // Ki·ªÉm tra ng∆∞·ª°ng vi ph·∫°m
  checkViolationThreshold();
}, [/* dependencies */]);
```

---

## ‚öñÔ∏è X·ª≠ L√Ω Vi Ph·∫°m

### 1. **Warning System**

#### a. Hi·ªÉn th·ªã C·∫£nh b√°o

```javascript
// Mapping lo·∫°i vi ph·∫°m ‚Üí message
switch (type) {
  case 'tabSwitches':
    message = t('antiCheat.tabSwitchWarning');
    break;
  case 'devToolsAttempts':
    message = t('antiCheat.devToolsWarning');
    break;
  // ... c√°c lo·∫°i kh√°c
}

setWarningMessage(message);
setShowWarning(true);

// T·ª± ƒë·ªông ·∫©n sau 3 gi√¢y
warningTimeoutRef.current = setTimeout(() => {
  setShowWarning(false);
}, 3000);
```

#### b. Warning Modal Component

```jsx
const AntiCheatWarning = () => {
  return (
    <div className="fixed inset-0 bg-red-900/80 backdrop-blur-sm z-[80]">
      <div className="bg-white/95 backdrop-blur-xl rounded-2xl border-2 border-red-500">
        {/* Header */}
        <div className="bg-gradient-to-r from-red-600 to-red-700 p-4">
          <h2>‚ö†Ô∏è {t('antiCheat.warningTitle')}</h2>
        </div>
        
        {/* Content */}
        <div className="p-6 text-center">
          <p className="text-red-700 font-semibold">{warningMessage}</p>
          <p>{t('antiCheat.violationCount')}: {totalViolations}</p>
          <p className="text-red-600">{t('antiCheat.consequences')}</p>
        </div>
      </div>
    </div>
  );
};
```

---

### 2. **Violation Threshold & Auto-Submit**

```javascript
// Ki·ªÉm tra ng∆∞·ª°ng vi ph·∫°m
const currentViolations = Object.values(suspiciousActivity).reduce((sum, count) => sum + count, 0);
const totalViolations = currentViolations + 1;

if (totalViolations >= 5) {
  setBlockedForCheating(true);
  handleAutoSubmit('Qu√° nhi·ªÅu h√†nh vi gian l·∫≠n ƒë∆∞·ª£c ph√°t hi·ªán');
}
```

#### Auto-Submit Function

```javascript
const handleAutoSubmit = useCallback(async (reason) => {
  if (isTestSubmitted) return;
  
  try {
    setIsTestSubmitted(true);
    setIsTestTerminated(true);
    
    const payload = {
      quiz_uuid: testId,
      student_username: localStorage.getItem('username') || '',
      answers: testData?.questions.map((question, index) => ({
        question_id: question.id,
        selected_option: answers[index] || ''
      })) || [],
      cheating_detected: true,
      cheating_reason: reason,
      activity_log: activityLogRef.current,
      suspicious_activity: suspiciousActivity,
      security_violation_detected: securityViolationDetected
    };

    const response = await fetch(`http://localhost:8000/api/v1/quiz/check-answers`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    if (response.ok) {
      const data = await response.json();
      setResults(data);
      clearSecureStorage();
    }
  } catch (err) {
    console.error('Error auto-submitting test:', err);
  }
}, [/* dependencies */]);
```

---

### 3. **Blocked Screen**

```jsx
if ((blockedForCheating || isTestTerminated) && !showBlockedResults) {
  return (
    <div className="h-screen bg-gradient-to-br from-red-100 to-red-200">
      <div className="bg-white/90 rounded-2xl border-2 border-red-500">
        {/* Header */}
        <div className="bg-gradient-to-r from-red-600 to-red-700 p-6">
          <h1>üö´ {t('antiCheat.testTerminated')}</h1>
        </div>
        
        {/* Content */}
        <div className="p-6">
          <p className="text-red-700">{t('antiCheat.blockedMessage')}</p>
          <p className="text-slate-600">{t('antiCheat.contactSupport')}</p>
          
          <button onClick={handleCloseBlockedScreen}>
            {results ? t('antiCheat.viewResults') : t('antiCheat.backToDashboard')}
          </button>
        </div>
      </div>
    </div>
  );
}
```

---

## üíæ L∆∞u Tr·ªØ An To√†n

### 1. **State Persistence**

```javascript
// Load t·ª´ secure storage khi component mount
const [suspiciousActivity, setSuspiciousActivity] = useState(() => 
  getSuspiciousActivityFromStorage(testId)
);

const [isTestSubmitted, setIsTestSubmitted] = useState(() => 
  getTestSubmittedFromStorage(testId)
);

const [isTestTerminated, setIsTestTerminated] = useState(() => 
  getTestTerminatedFromStorage(testId)
);
```

### 2. **Auto-Save v·ªõi useEffect**

```javascript
// T·ª± ƒë·ªông l∆∞u khi suspicious activity thay ƒë·ªïi
useEffect(() => {
  if (testId && !securityViolationDetected) {
    secureStorage.setSecureItem(
      `suspicious_activity_${testId}`, 
      suspiciousActivity, 
      testId
    );
  }
}, [suspiciousActivity, testId, securityViolationDetected]);

// T∆∞∆°ng t·ª± cho c√°c state kh√°c
useEffect(() => {
  if (testId && !securityViolationDetected) {
    secureStorage.setSecureItem(`test_submitted_${testId}`, isTestSubmitted, testId);
  }
}, [isTestSubmitted, testId, securityViolationDetected]);
```

### 3. **Integrity Validation**

```javascript
// Ki·ªÉm tra integrity khi component mount
useEffect(() => {
  if (testId) {
    const activityValid = secureStorage.validateStorageIntegrity(
      `suspicious_activity_${testId}`, 
      testId
    );
    const logValid = secureStorage.validateStorageIntegrity(
      `activity_log_${testId}`, 
      testId
    );
    const submittedValid = secureStorage.validateStorageIntegrity(
      `test_submitted_${testId}`, 
      testId
    );

    if (!activityValid || !logValid || !submittedValid) {
      console.warn('Storage integrity check failed - possible tampering detected');
      setSecurityViolationDetected(true);
    }
  }
}, [testId]);
```

---

## üìä B√°o C√°o & Gi√°m S√°t

### 1. **Leaderboard v·ªõi Th√¥ng Tin Anti-Cheat**

```jsx
<LeaderboardModalTest 
  isOpen={showLeaderboard} 
  onClose={() => setShowLeaderboard(false)} 
  leaderboardData={leaderboardData} 
  leaderboardLoading={leaderboardLoading} 
  testData={testData} 
/>
```

### 2. **Results Payload**

```javascript
const payload = {
  quiz_uuid: testId,
  student_username: localStorage.getItem('username') || '',
  answers: testData.questions.map((question, index) => ({
    question_id: question.id,
    selected_option: answers[index] || ''
  })),
  activity_log: activityLogRef.current,           // Full activity log
  suspicious_activity: suspiciousActivity,         // Counters
  security_violation_detected: securityViolationDetected,
  cheating_detected: blockedForCheating,
  cheating_reason: 'Qu√° nhi·ªÅu vi ph·∫°m...'
};
```

### 3. **Status Bar**

```jsx
<div className="bg-gradient-to-r from-orange-100 to-red-100 border-b border-orange-200 p-2">
  <div className="flex items-center justify-between">
    <div>
      <span>{t('antiCheat.secureMode')}</span>
      {!isFullscreen && (
        <span className="text-red-600">{t('antiCheat.fullscreenRequired')}</span>
      )}
    </div>
    <div>
      {t('antiCheat.violations')}: {Object.values(suspiciousActivity).reduce((sum, count) => sum + count, 0)}
    </div>
  </div>
</div>
```

---

## üîÑ Lu·ªìng Ho·∫°t ƒê·ªông T·ªïng Th·ªÉ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    H·ªçc sinh v√†o test                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Load tr·∫°ng th√°i t·ª´ Secure Storage                   ‚îÇ
‚îÇ  ‚Ä¢ Suspicious activity counters                             ‚îÇ
‚îÇ  ‚Ä¢ Activity log                                              ‚îÇ
‚îÇ  ‚Ä¢ Test submitted status                                     ‚îÇ
‚îÇ  ‚Ä¢ Test terminated status                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Ki·ªÉm tra Storage Integrity                           ‚îÇ
‚îÇ  ‚úì Valid ‚Üí Continue                                          ‚îÇ
‚îÇ  ‚úó Invalid ‚Üí Set securityViolationDetected = true            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Ki·ªÉm tra n·∫øu ƒë√£ b·ªã block/terminated tr∆∞·ªõc ƒë√≥              ‚îÇ
‚îÇ  ‚Ä¢ totalViolations >= 5 ‚Üí Block ngay                         ‚îÇ
‚îÇ  ‚Ä¢ isTestTerminated = true ‚Üí Show blocked screen             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              B·∫≠t Anti-Cheat Monitoring                        ‚îÇ
‚îÇ  ‚Ä¢ Force fullscreen                                          ‚îÇ
‚îÇ  ‚Ä¢ Setup event listeners                                     ‚îÇ
‚îÇ  ‚Ä¢ Start DevTools detection interval                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 H·ªçc sinh l√†m b√†i                             ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ N·∫øu c√≥ h√†nh vi ƒë√°ng ng·ªù:                       ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  1. Log activity                                ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  2. Increment counter                           ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  3. Save to secure storage                      ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  4. Show warning modal                          ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ  5. Check threshold (>= 5?)                     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ     ‚Üí Yes: Auto-submit & block                  ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ     ‚Üí No: Continue monitoring                   ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  N·ªôp b√†i (Submit)                            ‚îÇ
‚îÇ  ‚Ä¢ Normal submit: User clicks submit                        ‚îÇ
‚îÇ  ‚Ä¢ Auto-submit: Triggered by >= 5 violations                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            G·ª≠i payload l√™n backend                           ‚îÇ
‚îÇ  ‚Ä¢ Answers                                                   ‚îÇ
‚îÇ  ‚Ä¢ Activity log                                              ‚îÇ
‚îÇ  ‚Ä¢ Suspicious activity counters                             ‚îÇ
‚îÇ  ‚Ä¢ Security violation detected flag                         ‚îÇ
‚îÇ  ‚Ä¢ Cheating detected flag                                   ‚îÇ
‚îÇ  ‚Ä¢ Cheating reason                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Nh·∫≠n k·∫øt qu·∫£                                ‚îÇ
‚îÇ  ‚Ä¢ N·∫øu b·ªã block: Show blocked results screen                ‚îÇ
‚îÇ  ‚Ä¢ N·∫øu b√¨nh th∆∞·ªùng: Show normal results                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Clear Secure Storage                            ‚îÇ
‚îÇ  (Ch·ªâ sau khi submit th√†nh c√¥ng)                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ ƒêi·ªÉm M·∫°nh & H·∫°n Ch·∫ø

### ‚úÖ ƒêi·ªÉm M·∫°nh

1. **B·∫£o m·∫≠t nhi·ªÅu l·ªõp:**
   - Encryption (AES)
   - Obfuscation
   - Integrity checking
   - Fingerprinting

2. **Ph√°t hi·ªán to√†n di·ªán:**
   - DevTools
   - Tab switching
   - Copy/paste
   - Context menu
   - Keyboard shortcuts
   - Screenshot attempts
   - Fullscreen exit

3. **L∆∞u tr·ªØ an to√†n:**
   - Encrypted localStorage
   - Integrity verification
   - Tampering detection

4. **Activity logging chi ti·∫øt:**
   - Timestamp
   - Type
   - Details
   - Question index
   - Session ID

5. **Auto-submit mechanism:**
   - NgƒÉn ch·∫∑n gian l·∫≠n ti·∫øp t·ª•c
   - B·∫£o to√†n b·∫±ng ch·ª©ng
   - T·ª± ƒë·ªông x·ª≠ l√Ω

---

### ‚ö†Ô∏è H·∫°n Ch·∫ø

1. **C√≥ th·ªÉ bypass m·ªôt s·ªë ph∆∞∆°ng ph√°p:**
   - Virtual machine v·ªõi nhi·ªÅu m√†n h√¨nh
   - Camera/ƒëi·ªán tho·∫°i ch·ª•p m√†n h√¨nh
   - S·ª≠ d·ª•ng thi·∫øt b·ªã kh√°c ƒë·ªÉ tra c·ª©u

2. **Browser compatibility:**
   - M·ªôt s·ªë browser kh√¥ng h·ªó tr·ª£ fullscreen API
   - DevTools detection c√≥ th·ªÉ kh√¥ng ch√≠nh x√°c 100%

3. **False positives:**
   - Ng∆∞·ªùi d√πng c√≥ th·ªÉ v√¥ t√¨nh vi ph·∫°m (network issue, browser crash)
   - C·∫ßn c√≥ c∆° ch·∫ø review/appeal

4. **Performance:**
   - DevTools checking m·ªói gi√¢y c√≥ th·ªÉ ·∫£nh h∆∞·ªüng performance tr√™n thi·∫øt b·ªã y·∫øu
   - Encryption/decryption overhead

5. **User experience:**
   - Fullscreen b·∫Øt bu·ªôc c√≥ th·ªÉ g√¢y kh√≥ ch·ªãu
   - Kh√¥ng th·ªÉ copy/paste legitimate content
   - C·∫£nh b√°o li√™n t·ª•c c√≥ th·ªÉ l√†m cƒÉng th·∫≥ng

---

## üîß Khuy·∫øn Ngh·ªã C·∫£i Ti·∫øn

### 1. **Th√™m AI-based Behavior Analysis**
```javascript
// Ph√¢n t√≠ch pattern h√†nh vi
const analyzeBehavior = (activityLog) => {
  // Detect unusual patterns
  // E.g., answering too fast, too slow, inconsistent timing
  return suspicionScore;
};
```

### 2. **Webcam Proctoring (T√πy ch·ªçn)**
```javascript
// Request webcam access
// Capture frames periodically
// Detect multiple faces, looking away, etc.
```

### 3. **IP & Device Tracking**
```javascript
// Track IP changes during test
// Flag if student switches devices
```

### 4. **Question Randomization**
```javascript
// Randomize question order
// Randomize option order
// Use question banks
```

### 5. **Time-based Analysis**
```javascript
// Flag suspiciously fast answers
// Detect copy-paste patterns (answer immediately after question loads)
```

---

## üìö Translation Keys Reference

### Anti-Cheat Related Keys

```json
{
  "antiCheat": {
    "warningTitle": "C·∫£nh b√°o vi ph·∫°m",
    "tabSwitchWarning": "Ph√°t hi·ªán chuy·ªÉn tab/c·ª≠a s·ªï...",
    "devToolsWarning": "Ph√°t hi·ªán Developer Tools...",
    "copyWarning": "Ph√°t hi·ªán sao ch√©p n·ªôi dung...",
    "screenshotWarning": "Ph√°t hi·ªán ch·ª•p m√†n h√¨nh...",
    "contextMenuWarning": "Ph√°t hi·ªán click chu·ªôt ph·∫£i...",
    "shortcutWarning": "Ph√°t hi·ªán ph√≠m t·∫Øt b·ªã c·∫•m...",
    "violationCount": "S·ªë l·∫ßn vi ph·∫°m",
    "consequences": "Qu√° 5 l·∫ßn vi ph·∫°m s·∫Ω b·ªã ch·∫•m d·ª©t b√†i thi!",
    "understood": "ƒê√£ hi·ªÉu",
    "testTerminated": "B√†i thi ƒë√£ b·ªã ch·∫•m d·ª©t",
    "blockedMessage": "B·∫°n ƒë√£ b·ªã ch·∫•m d·ª©t b√†i thi do c√≥ qu√° nhi·ªÅu h√†nh vi gian l·∫≠n.",
    "contactSupport": "Vui l√≤ng li√™n h·ªá v·ªõi b·ªô ph·∫≠n h·ªó tr·ª£ n·∫øu b·∫°n cho r·∫±ng ƒë√¢y l√† l·ªói.",
    "secureMode": "Ch·∫ø ƒë·ªô b·∫£o m·∫≠t ƒëang b·∫≠t",
    "fullscreenRequired": "Y√™u c·∫ßu ch·∫ø ƒë·ªô to√†n m√†n h√¨nh",
    "violations": "Vi ph·∫°m",
    "enterFullscreen": "V√†o ch·∫ø ƒë·ªô to√†n m√†n h√¨nh",
    "resultsMayBeInvalid": "K·∫øt qu·∫£ c√≥ th·ªÉ kh√¥ng ƒë∆∞·ª£c ghi nh·∫≠n",
    "cheatingDetected": "Ph√°t hi·ªán gian l·∫≠n",
    "viewResults": "Xem k·∫øt qu·∫£",
    "backToDashboard": "Quay v·ªÅ Dashboard"
  }
}
```

---

## üéì K·∫øt Lu·∫≠n

H·ªá th·ªëng Anti-Cheat n√†y cung c·∫•p m·ªôt gi·∫£i ph√°p **to√†n di·ªán v√† m·∫°nh m·∫Ω** ƒë·ªÉ ngƒÉn ch·∫∑n gian l·∫≠n trong c√°c b√†i test online. B·∫±ng c√°ch k·∫øt h·ª£p:

- **B·∫£o m·∫≠t d·ªØ li·ªáu** (encryption, obfuscation, integrity checking)
- **Ph√°t hi·ªán h√†nh vi** (event listeners, monitoring)
- **X·ª≠ l√Ω vi ph·∫°m** (warnings, auto-submit, blocking)
- **L∆∞u tr·ªØ an to√†n** (secure storage, fingerprinting)
- **B√°o c√°o chi ti·∫øt** (activity logs, leaderboard)

H·ªá th·ªëng t·∫°o ra m·ªôt m√¥i tr∆∞·ªùng thi c·ª≠ **c√¥ng b·∫±ng** v√† **ƒë√°ng tin c·∫≠y**, ƒë·ªìng th·ªùi v·∫´n c√¢n b·∫±ng ƒë∆∞·ª£c tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.

Tuy nhi√™n, **kh√¥ng c√≥ h·ªá th·ªëng n√†o l√† ho√†n h·∫£o 100%**. N√™n k·∫øt h·ª£p v·ªõi:
- Gi√°o d·ª•c v·ªÅ trung th·ª±c h·ªçc thu·∫≠t
- Random question banks
- Manual review cho c√°c tr∆∞·ªùng h·ª£p ƒë√°ng ng·ªù
- C∆° ch·∫ø appeal/review cho false positives